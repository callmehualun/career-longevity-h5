<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç§»åŠ¨ç«¯æµ‹è¯•é¡µ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }

    .test-item {
      background: white;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }

    .success {
      background: #10b981;
      color: white;
    }

    .error {
      background: #ef4444;
      color: white;
    }

    h1 {
      margin-bottom: 20px;
      color: #111;
    }

    .info {
      font-size: 14px;
      color: #666;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <h1>ğŸ” ç§»åŠ¨ç«¯è¯Šæ–­æµ‹è¯•</h1>

  <div id="results"></div>

  <script>
    const results = document.getElementById('results');

    function addTest(name, status, info = '') {
      const div = document.createElement('div');
      div.className = 'test-item';
      div.innerHTML = `
        <div>
          ${name}
          <span class="status ${status ? 'success' : 'error'}">
            ${status ? 'âœ“ é€šè¿‡' : 'âœ— å¤±è´¥'}
          </span>
        </div>
        ${info ? `<div class="info">${info}</div>` : ''}
      `;
      results.appendChild(div);
    }

    // æµ‹è¯•1: åŸºç¡€ HTML åŠ è½½
    addTest('HTML é¡µé¢åŠ è½½', true, 'HTML æ–‡ä»¶å·²æˆåŠŸåŠ è½½');

    // æµ‹è¯•2: JavaScript æ‰§è¡Œ
    addTest('JavaScript æ‰§è¡Œ', true, 'JS ä»£ç æ­£å¸¸è¿è¡Œ');

    // æµ‹è¯•3: LocalStorage
    try {
      localStorage.setItem('test', 'value');
      const val = localStorage.getItem('test');
      localStorage.removeItem('test');
      addTest('LocalStorage', val === 'value', 'LocalStorage å¯ç”¨');
    } catch(e) {
      addTest('LocalStorage', false, 'LocalStorage ä¸å¯ç”¨: ' + e.message);
    }

    // æµ‹è¯•4: å±å¹•ä¿¡æ¯
    const screenInfo = `å®½åº¦: ${window.innerWidth}px, é«˜åº¦: ${window.innerHeight}px`;
    addTest('å±å¹•å°ºå¯¸', true, screenInfo);

    // æµ‹è¯•5: User Agent
    const ua = navigator.userAgent;
    const isMobile = /iPhone|iPad|Android/i.test(ua);
    addTest('è®¾å¤‡ç±»å‹', true, isMobile ? 'ç§»åŠ¨è®¾å¤‡' : 'æ¡Œé¢è®¾å¤‡');

    // æµ‹è¯•6: ç½‘ç»œè¿æ¥
    addTest('ç½‘ç»œçŠ¶æ€', navigator.onLine, navigator.onLine ? 'åœ¨çº¿' : 'ç¦»çº¿');

    // æµ‹è¯•7: HTTPS
    const isHTTPS = window.location.protocol === 'https:';
    addTest('HTTPS', isHTTPS, window.location.protocol);

    // æµ‹è¯•8: CSS åŠ è½½
    setTimeout(() => {
      const testDiv = document.querySelector('.test-item');
      const bgColor = window.getComputedStyle(testDiv).backgroundColor;
      const cssWorking = bgColor === 'rgb(255, 255, 255)' || bgColor === '#ffffff';
      addTest('CSS æ ·å¼', cssWorking, 'èƒŒæ™¯è‰²: ' + bgColor);
    }, 100);

    // æµ‹è¯•9: å°è¯•åŠ è½½ CSS æ–‡ä»¶
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'css/common.css';
    link.onload = () => {
      addTest('CSS æ–‡ä»¶åŠ è½½', true, 'css/common.css åŠ è½½æˆåŠŸ');
    };
    link.onerror = () => {
      addTest('CSS æ–‡ä»¶åŠ è½½', false, 'css/common.css åŠ è½½å¤±è´¥');
    };
    document.head.appendChild(link);

    // æµ‹è¯•10: å°è¯•åŠ è½½ JS æ–‡ä»¶
    const script = document.createElement('script');
    script.src = 'data/questions.js';
    script.onload = () => {
      addTest('JS æ–‡ä»¶åŠ è½½', true, 'data/questions.js åŠ è½½æˆåŠŸ');

      // æµ‹è¯•11: æ•°æ®æ–‡ä»¶å†…å®¹
      if (typeof CareerData !== 'undefined') {
        addTest('æµ‹è¯„æ•°æ®', true, `åŠ è½½äº† ${Object.keys(CareerData.questions || {}).length} é“é¢˜ç›®`);
      } else {
        addTest('æµ‹è¯„æ•°æ®', false, 'CareerData æœªå®šä¹‰');
      }
    };
    script.onerror = () => {
      addTest('JS æ–‡ä»¶åŠ è½½', false, 'data/questions.js åŠ è½½å¤±è´¥');
    };
    document.head.appendChild(script);

  </script>
</body>
</html>
